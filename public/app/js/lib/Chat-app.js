define(["castrato","host","client","console"],function(o){o.on("window:focused",function(){o.emit("audio:off"),o.emit("notification:off")}).on("window:blurred",function(){o.emit("audio:on"),o.emit("notification:on")}).on("command:mute",function(){o.emit("audio:mute")}).on("command:unmute",function(){o.emit("audio:unmute")}).on("room:changed",function(n){o.emit("console:param",{room:n}).emit("host:param",{room:n})}).on("nick:changed",function(n){o.emit("console:param",{nick:n})}).on("key:changed",function(n){o.emit("console:param",{key:n}).emit("host:param",{key:n})}).emit("command:connect",void 0,function(){(hash=window.location.hash)&&(parts=hash.slice(1).split(":"),parts[0]&&o.emit("command:join",parts[0]),parts[1]&&o.emit("command:key",parts[1]))})});